لإضافة ميزات الذكاء الاصطناعي وعرض البيانات في الوقت الحقيقي (real-time) في النظام الذي أنشأناه، يمكننا اتباع الخطوات التالية:

1. **إعداد بيئة الذكاء الاصطناعي**:
   - سنستخدم مكتبة Python مثل TensorFlow أو PyTorch لتنفيذ نماذج الذكاء الاصطناعي.
   - لربط Python بـ PHP، يمكننا استخدام Flask كواجهة برمجية (API) لتحليل البيانات والتنبؤات.

2. **إعداد Flask API**:
   - إنشاء تطبيق Flask الذي سيعالج البيانات ويرسل النتائج إلى واجهة المستخدم.

3. **دمج Flask مع PHP**:
   - استخدام JavaScript لجلب البيانات من Flask API وعرضها في الوقت الحقيقي.

### الخطوة 1: إعداد بيئة الذكاء الاصطناعي باستخدام Flask

#### إنشاء مشروع Flask:

1. **تنصيب Flask**:
   ```bash
   pip install Flask
   ```

2. **إنشاء ملف app.py**:
   ```python
   from flask import Flask, request, jsonify
   import tensorflow as tf

   app = Flask(__name__)

   # نموذج بسيط للذكاء الاصطناعي (يمكن استبداله بنموذج حقيقي)
   def predict_age_category(age):
       if age < 2:
           return "رضيع"
       elif 13 <= age <= 30:
           return "شباب"
       elif age > 60:
           return "كبار"
       else:
           return "عمر غير محدد"

   @app.route('/predict', methods=['POST'])
   def predict():
       data = request.get_json(force=True)
       age = data['age']
       category = predict_age_category(age)
       return jsonify({'category': category})

   if __name__ == '__main__':
       app.run(debug=True)
   ```

### الخطوة 2: دمج Flask مع PHP

1. **تحديث ملف HTML لجلب البيانات من Flask API**:
   ```html
   <!DOCTYPE html>
   <html lang="ar">
   <head>
       <meta charset="UTF-8">
       <title>تسجيل المواطنين</title>
       <script>
           function predictAgeCategory(age) {
               fetch('http://127.0.0.1:5000/predict', {
                   method: 'POST',
                   headers: {
                       'Content-Type': 'application/json'
                   },
                   body: JSON.stringify({ age: age })
               })
               .then(response => response.json())
               .then(data => {
                   document.getElementById('age_category').innerText = 'الفئة العمرية: ' + data.category;
               })
               .catch(error => console.error('Error:', error));
           }

           function updateAgeCategory() {
               const age = document.getElementById('age').value;
               predictAgeCategory(age);
           }
       </script>
   </head>
   <body>
       <h2>نموذج تسجيل المواطن</h2>
       <form action="insert.php" method="post">
           <label for="unique_id">الرقم المميز:</label><br>
           <input type="text" id="unique_id" name="unique_id" required><br>
           <label for="first_name">الاسم الأول:</label><br>
           <input type="text" id="first_name" name="first_name" required><br>
           <label for="second_name">الاسم الثاني:</label><br>
           <input type="text" id="second_name" name="second_name" required><br>
           <label for="third_name">الاسم الثالث:</label><br>
           <input type="text" id="third_name" name="third_name" required><br>
           <label for="fourth_name">الاسم الرابع:</label><br>
           <input type="text" id="fourth_name" name="fourth_name" required><br>
           <label for="age">العمر:</label><br>
           <input type="number" id="age" name="age" required oninput="updateAgeCategory()"><br>
           <div id="age_category"></div><br>
           <label for="gender">الجنس:</label><br>
           <select id="gender" name="gender" required>
               <option value="Male">ذكر</option>
               <option value="Female">أنثى</option>
           </select><br>
           <label for="is_married">متزوج:</label><br>
           <select id="is_married" name="is_married" required>
               <option value="Yes">نعم</option>
               <option value="No">لا</option>
           </select><br>
           <label for="father_name">اسم الأب:</label><br>
           <input type="text" id="father_name" name="father_name" required><br>
           <label for="mother_name">اسم الأم:</label><br>
           <input type="text" id="mother_name" name="mother_name" required><br>
           <label for="locality">المحلية:</label><br>
           <input type="text" id="locality" name="locality" required><br>
           <label for="administrative_unit">الوحدة الإدارية:</label><br>
           <input type="text" id="administrative_unit" name="administrative_unit" required><br>
           <label for="village">القرية:</label><br>
           <input type="text" id="village" name="village" required><br>
           <label for="is_war_refugee">فار من الحرب:</label><br>
           <select id="is_war_refugee" name="is_war_refugee" required>
               <option value="Yes">نعم</option>
               <option value="No">لا</option>
           </select><br><br>
           <input type="submit" value="تسجيل">
       </form>
       <br>
       <a href="view.php">عرض البيانات</a>
   </body>
   </html>
   ```

2. **تشغيل Flask API**:
   - قم بتشغيل تطبيق Flask باستخدام الأمر التالي:
     ```bash
     python app.py
     ```

3. **تحديث ملف عرض البيانات**:
   - يمكنك استخدام JavaScript وAJAX لجلب البيانات من API وعرضها في الوقت الحقيقي في صفحة `view.php`.

بهذه الطريقة، يمكنك استخدام الذكاء الاصطناعي ودمج Flask مع PHP لعرض البيانات في الوقت الحقيقي وإجراء تحليلات وتنبؤات بناءً على البيانات المدخلة.
